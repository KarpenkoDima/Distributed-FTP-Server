# MVP FTP Server - Single Instance

–≠—Ç–æ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å–æ–¥–µ—Ä–∂–∏—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é **FTP-—Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ .NET C# —Å —Ñ–æ–∫—É—Å–æ–º –Ω–∞ –±—É–¥—É—â–µ–º –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–∏**. –ù–∞ –¥–∞–Ω–Ω–æ–º —ç—Ç–∞–ø–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω **–æ–¥–∏–Ω–æ—á–Ω—ã–π FTP —Å–µ—Ä–≤–µ—Ä** –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ core —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ—Ö–æ–¥–æ–º –∫ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ.

## üéØ –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å: MVP Single FTP Server ‚úÖ

**–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- ‚úÖ –û—Å–Ω–æ–≤–Ω–æ–π FTP —Å–µ—Ä–≤–µ—Ä —Å –ø–æ–ª–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å—é
- ‚úÖ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è  
- ‚úÖ –§–∞–π–ª–æ–≤–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ —á–µ—Ä–µ–∑ bind mount
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–æ–º–∞–Ω–¥: USER, PASS, PWD, CWD, LIST, STOR, RETR, PASV
- ‚úÖ Passive —Ä–µ–∂–∏–º –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ —Ñ–∞–π–ª–æ–≤
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è –∏–∑–æ–ª—è—Ü–∏—è (–∫–∞–∂–¥—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ —Å–≤–æ–µ–π –ø–∞–ø–∫–µ)
- ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å FileZilla

## üß© –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### –¢–µ–∫—É—â–∏–µ (MVP):
* **FtpServer.Core:** –û—Å–Ω–æ–≤–Ω–æ–µ —è–¥—Ä–æ FTP-—Å–µ—Ä–≤–µ—Ä–∞
* **FtpServer.Auth:** –°–µ—Ä–≤–∏—Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –Ω–∞ ASP.NET Core Web API  
* **FtpServer.Commons:** –û–±—â–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∫–ª–∞—Å—Å–æ–≤ –¥–ª—è –º–æ–¥–µ–ª–µ–π –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤

### –ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–µ (Distributed):
* **nginx:** Load balancer –¥–ª—è FTP —Å–µ—Ä–≤–µ—Ä–æ–≤
* **Redis:** –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏ –º–µ–∂–¥—É —Å–µ—Ä–≤–µ—Ä–∞–º–∏
* **NFS/—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–∞—è –§–°:** Shared storage –¥–ª—è —Ñ–∞–π–ª–æ–≤

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
FtpServer/
‚îú‚îÄ‚îÄ FtpServer.Core/           # –û—Å–Ω–æ–≤–Ω–æ–π FTP —Å–µ—Ä–≤–µ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ BasicFtpServer.cs     # Core FTP –ª–æ–≥–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ Program.cs            # Entry point
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile            # Docker –æ–±—Ä–∞–∑
‚îÇ   ‚îî‚îÄ‚îÄ appsettings.json      # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ FtpServer.Auth/           # Authentication API  
‚îú‚îÄ‚îÄ FtpServer.Commons/        # Shared models/interfaces
‚îî‚îÄ‚îÄ app/
    ‚îî‚îÄ‚îÄ shared_storage/       # –§–∞–π–ª–æ–≤–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (bind mount)
        ‚îú‚îÄ‚îÄ demo/             # –ü–∞–ø–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è demo
        ‚îú‚îÄ‚îÄ admin/            # –ü–∞–ø–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è admin  
        ‚îî‚îÄ‚îÄ test/             # –ü–∞–ø–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è test
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Docker —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- –ü–æ—Ä—Ç—ã 21 –∏ 50000-50010 —Å–≤–æ–±–æ–¥–Ω—ã

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ñ–∞–π–ª–æ–≤–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞

```bash
# –°–æ–∑–¥–∞–π—Ç–µ –ø–∞–ø–∫—É –¥–ª—è —Ñ–∞–π–ª–æ–≤ –Ω–∞ —Ö–æ—Å—Ç–µ
mkdir -p /path/to/your/ftp/storage

# –î–∞–π—Ç–µ –ø—Ä–∞–≤–∞ Docker –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é (UID 1001)
sudo chown -R 1001:1001 /path/to/your/ftp/storage
```

### 2. –°–±–æ—Ä–∫–∞ Docker –æ–±—Ä–∞–∑–∞

```bash
# –ò–∑ –∫–æ—Ä–Ω–µ–≤–æ–π –ø–∞–ø–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞
docker build -f FtpServer.Core/Dockerfile -t ftp-server:mvp .
```

### 3. –ó–∞–ø—É—Å–∫ FTP —Å–µ—Ä–≤–µ—Ä–∞

```bash
# –£–∑–Ω–∞–π—Ç–µ –≤–∞—à IP –∞–¥—Ä–µ—Å
curl ifconfig.me

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä (–∑–∞–º–µ–Ω–∏—Ç–µ YOUR_HOST_IP –∏ /path/to/your/ftp/storage)
docker run -d \
  --name ftp-server-mvp \
  -p 21:21 \
  -p 50000-50010:50000-50010 \
  -e FtpExternalIP=YOUR_HOST_IP \
  -e FtpBehindProxy=false \
  -e port=21 \
  -v /path/to/your/ftp/storage:/app/shared_storage \
  ftp-server:mvp

```

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
docker logs -f ftp-server-mvp

# –î–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
# üìÅ Using SHARED storage: /app/shared_storage
# üöÄ FTP Server started on port 2122
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ö–æ–º–∞–Ω–¥–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ (telnet)

```bash
# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
telnet localhost 2122

# –í telnet —Å–µ—Å—Å–∏–∏:
USER demo
PASS any_password
PWD
LIST
QUIT
```

### FileZilla

```
Host: localhost (–∏–ª–∏ –≤–∞—à IP)
Port: 2122
Protocol: FTP  
User: demo (–∏–ª–∏ admin, test)
Password: –ª—é–±–æ–π
Transfer mode: Passive
```

### –¢–µ—Å—Ç–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏

| –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å | –ü–∞—Ä–æ–ª—å | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------------|--------|----------|
| demo        | –ª—é–±–æ–π  | –¢–µ—Å—Ç–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å |
| admin       | –ª—é–±–æ–π  | –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä |
| test        | –ª—é–±–æ–π  | –¢–µ—Å—Ç–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å |

## üìÅ –§–∞–π–ª–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –≤ –ø–∞–ø–∫–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è:

```
your_storage_folder/
‚îú‚îÄ‚îÄ demo/
‚îÇ   ‚îú‚îÄ‚îÄ uploads/          # –ü–∞–ø–∫–∞ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ downloads/        # –ü–∞–ø–∫–∞ —Å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏
‚îÇ       ‚îú‚îÄ‚îÄ readme.txt
‚îÇ       ‚îî‚îÄ‚îÄ sample.txt
‚îú‚îÄ‚îÄ admin/
‚îÇ   ‚îú‚îÄ‚îÄ uploads/
‚îÇ   ‚îî‚îÄ‚îÄ downloads/
‚îî‚îÄ‚îÄ test/
    ‚îú‚îÄ‚îÄ uploads/
    ‚îî‚îÄ‚îÄ downloads/
```

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|------------|----------|--------------|
| `FtpExternalIP` | –í–Ω–µ—à–Ω–∏–π IP –¥–ª—è PASV —Ä–µ–∂–∏–º–∞ | 127.0.0.1 |
| `FtpBehindProxy` | –†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã –∑–∞ –ø—Ä–æ–∫—Å–∏ | false |
| `port` | –ü–æ—Ä—Ç FTP —Å–µ—Ä–≤–µ—Ä–∞ | 2122 |
| `FtpPasvMinPort` | –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø–æ—Ä—Ç –¥–ª—è –¥–∞–Ω–Ω—ã—Ö | 50000 |
| `FtpPasvMaxPort` | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –ø–æ—Ä—Ç –¥–ª—è –¥–∞–Ω–Ω—ã—Ö | 50010 |
| `SharedStoragePath` | –ü—É—Ç—å –∫ —Ö—Ä–∞–Ω–∏–ª–∏—â—É —Ñ–∞–π–ª–æ–≤ | /app/shared_storage |


### appsettings.json

```json
{
  "port": 2122,
  "authservice": "http://localhost:5160",
  "RedisConnectionString": "localhost:6379",
  "FtpExternalIP": "127.0.0.1",
  "FtpBehindProxy": false,
  "FtpPasvMinPort": 50000,
  "FtpPasvMaxPort": 50010,
  "SharedStoragePath": "/app/shared_storage"
}
```

## üîß –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
docker stop ftp-server-mvp

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å  
docker restart ftp-server-mvp

# –£–¥–∞–ª–∏—Ç—å
docker stop ftp-server-mvp && docker rm ftp-server-mvp

# –õ–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
docker logs -f ftp-server-mvp

# –ó–∞–π—Ç–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker exec -it ftp-server-mvp bash
```

### –û—Ç–ª–∞–¥–∫–∞

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–∞–π–ª—ã –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
docker exec ftp-server-mvp ls -la /app/shared_storage

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–∞–π–ª—ã –Ω–∞ —Ö–æ—Å—Ç–µ
ls -la /path/to/your/ftp/storage

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–µ—Ç–µ–≤—ã–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
netstat -tlnp | grep 2122
netstat -tlnp | grep 50000
```

## üêõ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ü—Ä–æ–±–ª–µ–º–∞: Access denied –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø–∞–ø–æ–∫

```bash
# –†–µ—à–µ–Ω–∏–µ: –∏—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–∞–≤–∞ –Ω–∞ –ø–∞–ø–∫—É —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
sudo chown -R 1001:1001 /path/to/your/ftp/storage
```

### –ü—Ä–æ–±–ª–µ–º–∞: FileZilla –Ω–µ –º–æ–∂–µ—Ç –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å —Ñ–∞–π–ª—ã

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –≤–Ω–µ—à–Ω–∏–π IP –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
curl ifconfig.me

# –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –ø–æ—Ä—Ç—ã –¥–∞–Ω–Ω—ã—Ö –æ—Ç–∫—Ä—ã—Ç—ã
docker run ... -e FtpExternalIP=YOUR_REAL_IP ...
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ü–æ—Ä—Ç—ã –∑–∞–Ω—è—Ç—ã

```bash
# –ù–∞–π—Ç–∏ –ø—Ä–æ—Ü–µ—Å—Å—ã –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–µ –ø–æ—Ä—Ç—ã
sudo netstat -tlnp | grep 21
sudo netstat -tlnp | grep 50000

# –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–∏–µ –ø–æ—Ä—Ç—ã
docker run ... -p 2121:21 -p 50100-50110:50000-50010 ...
```

## üó∫Ô∏è Roadmap

### ‚úÖ –§–∞–∑–∞ 1: MVP Single Server (—Ç–µ–∫—É—â–∞—è)
- –û—Å–Ω–æ–≤–Ω–∞—è FTP —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è
- –§–∞–π–ª–æ–≤–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
- –ë–∞–∑–æ–≤–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

### üîÑ –§–∞–∑–∞ 2: Distributed Architecture (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)
- nginx load balancer
- Redis session management  
- –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ FTP —Å–µ—Ä–≤–µ—Ä—ã
- NFS shared storage

### üöÄ –§–∞–∑–∞ 3: Production Ready
- FTPS –ø–æ–¥–¥–µ—Ä–∂–∫–∞
- Monitoring –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- Health checks
- Auto-scaling

## üìù –õ–æ–≥–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –¢–∏–ø–∏—á–Ω—ã–µ –ª–æ–≥–∏ –ø—Ä–∏ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç–µ:

```
üìÅ Using SHARED storage: /app/shared_storage
üìÅ FTP Root directory: /app/shared_storage
üöÄ FTP Server started on port 21
üìû New client connected: 172.17.0.1:54321
üë§ [abc12345] User: demo
‚úÖ [abc12345] Authentication successful for demo
üîß [abc12345] PASV Config: Proxy=false, IP=192.168.1.100, Range=50000-50010
üì° [abc12345] Data connection prepared on port 50000
```

## ü§ù –£—á–∞—Å—Ç–∏–µ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

1. Fork —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. –°–æ–∑–¥–∞–π—Ç–µ feature branch
3. –ó–∞—Ñ–∏–∫—Å–∏—Ä—É–π—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
4. –°–æ–∑–¥–∞–π—Ç–µ Pull Request

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - —Å–º. —Ñ–∞–π–ª LICENSE –¥–ª—è –¥–µ—Ç–∞–ª–µ–π.

---

**–°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞:** MVP Ready ‚úÖ | **–°–ª–µ–¥—É—é—â–∏–π —ç—Ç–∞–ø:** Distributed Architecture üîÑ