# ğŸš€ Ğ£Ñ‡ĞµĞ±Ğ½Ñ‹Ğ¹ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚: Distributed FTP Server - Enterprise Production Ready

[![.NET](https://img.shields.io/badge/.NET-8.0-purple.svg)](https://dotnet.microsoft.com/download/dotnet/8.0)
[![Docker](https://img.shields.io/badge/Docker-20.10+-blue.svg)](https://www.docker.com/)
[![HAProxy](https://img.shields.io/badge/HAProxy-2.8+-red.svg)](https://www.haproxy.org/)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

Ğ­Ñ‚Ğ¾Ñ‚ Ñ€ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ¹ ÑĞ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ñ‚ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ **enterprise-grade Ğ¼Ğ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€ÑƒĞµĞ¼Ğ¾Ğ³Ğ¾ Ñ€Ğ°ÑĞ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ½Ğ¾Ğ³Ğ¾ FTP-ÑĞµÑ€Ğ²ĞµÑ€Ğ° Ğ½Ğ° .NET C#** Ñ Ğ¸Ğ½Ñ‚ĞµĞ»Ğ»ĞµĞºÑ‚ÑƒĞ°Ğ»ÑŒĞ½Ğ¾Ğ¹ Ğ±Ğ°Ğ»Ğ°Ğ½ÑĞ¸Ñ€Ğ¾Ğ²ĞºĞ¾Ğ¹ Ğ½Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸, ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸ĞµĞ¼ ÑĞµÑÑĞ¸ÑĞ¼Ğ¸ Ğ¸ Ñ†ĞµĞ½Ñ‚Ñ€Ğ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ¾Ğ¹ Ğ°ÑƒÑ‚ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸ĞµĞ¹.

## ğŸ¯ Ğ¢ĞµĞºÑƒÑ‰Ğ¸Ğ¹ ÑÑ‚Ğ°Ñ‚ÑƒÑ: Production Ready âœ…

**Ğ§Ñ‚Ğ¾ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚:**
- âœ… **HAProxy Load Balancer** Ñ Ğ½Ğ°Ñ‚Ğ¸Ğ²Ğ½Ğ¾Ğ¹ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ¾Ğ¹ FTP Ğ¸ sticky sessions
- âœ… **ĞšĞ»Ğ°ÑÑ‚ĞµÑ€ Ğ¸Ğ· 3 FTP ÑĞµÑ€Ğ²ĞµÑ€Ğ¾Ğ²** Ñ Ğ³Ğ¾Ñ€Ğ¸Ğ·Ğ¾Ğ½Ñ‚Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¼ Ğ¼Ğ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸ĞµĞ¼
- âœ… **Redis Ğ´Ğ»Ñ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ ÑĞµÑÑĞ¸ÑĞ¼Ğ¸** Ğ¼ĞµĞ¶Ğ´Ñƒ ÑĞµÑ€Ğ²ĞµÑ€Ğ°Ğ¼Ğ¸
- âœ… **Ğ¦ĞµĞ½Ñ‚Ñ€Ğ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ°Ñ ÑĞ»ÑƒĞ¶Ğ±Ğ° Ğ°ÑƒÑ‚ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ğ¸** (ASP.NET Core API)
- âœ… **Shared storage** Ğ´Ğ»Ñ Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ² Ğ¼ĞµĞ¶Ğ´Ñƒ Ğ²ÑĞµĞ¼Ğ¸ ÑĞµÑ€Ğ²ĞµÑ€Ğ°Ğ¼Ğ¸
- âœ… **Health monitoring** Ñ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¼ Ğ¸ÑĞºĞ»ÑÑ‡ĞµĞ½Ğ¸ĞµĞ¼ Ğ½ĞµÑ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ÑÑ‰Ğ¸Ñ… ÑĞµÑ€Ğ²ĞµÑ€Ğ¾Ğ²
- âœ… **Sticky sessions Ğ¿Ğ¾ IP** ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ° Ğ´Ğ»Ñ ĞºĞ¾Ğ½ÑĞ¸ÑÑ‚ĞµĞ½Ñ‚Ğ½Ğ¾ÑÑ‚Ğ¸ ÑĞ¾ĞµĞ´Ğ¸Ğ½ĞµĞ½Ğ¸Ğ¹
- âœ… **Docker networking** Ñ Ğ¿Ğ¾Ğ»Ğ½Ğ¾Ğ¹ Ğ¸Ğ·Ğ¾Ğ»ÑÑ†Ğ¸ĞµĞ¹ ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ²
- âœ… **Web-Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹Ñ Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³Ğ°** HAProxy
- âœ… **ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ¾Ğµ Ñ€Ğ°Ğ·Ğ²ĞµÑ€Ñ‚Ñ‹Ğ²Ğ°Ğ½Ğ¸Ğµ** Ğ¾Ğ´Ğ½Ğ¾Ğ¹ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ¾Ğ¹

## ğŸ—ï¸ ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Ğ’ĞĞ•Ğ¨ĞĞ˜Ğ™ ĞœĞ˜Ğ                                   â”‚
â”‚                   (FTP Clients)                                     â”‚
â”‚               FileZilla, WinSCP, etc.                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚ Port 21 (Control) + 50000-50010 (Data)
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    HAPROXY LOAD BALANCER                            â”‚
â”‚                      (haproxy-ftp)                                  â”‚
â”‚  â€¢ TCP mode Ğ´Ğ»Ñ Ğ½Ğ°Ñ‚Ğ¸Ğ²Ğ½Ğ¾Ğ¹ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ¸ FTP                              â”‚
â”‚  â€¢ Sticky Sessions Ğ¿Ğ¾ IP ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ°                                    â”‚
â”‚  â€¢ Health Checks Ğ´Ğ»Ñ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğ³Ğ¾ failover                       â”‚
â”‚  â€¢ Web Stats Interface (8404/stats)                                 â”‚
â”‚  â€¢ Round-robin Ğ±Ğ°Ğ»Ğ°Ğ½ÑĞ¸Ñ€Ğ¾Ğ²ĞºĞ°                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚ ftp-network (internal)
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                 â”‚                 â”‚
        â–¼                 â–¼                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ FTP-SERVER-1â”‚   â”‚ FTP-SERVER-2â”‚   â”‚ FTP-SERVER-3â”‚
â”‚  (.NET 8)   â”‚   â”‚  (.NET 8)   â”‚   â”‚  (.NET 8)   â”‚
â”‚  Port: 21   â”‚   â”‚  Port: 21   â”‚   â”‚  Port: 21   â”‚
â”‚  Data: 50000+â”‚   â”‚  Data: 50000+â”‚   â”‚  Data: 50000+â”‚
â”‚  âœ… Health   â”‚   â”‚  âœ… Health   â”‚   â”‚  âœ… Health   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                 â”‚                 â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚              SHARED SERVICES                â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
        â”‚  â”‚    REDIS    â”‚      â”‚  AUTH SERVICE   â”‚   â”‚
        â”‚  â”‚  Sessions   â”‚â—„â”€â”€â”€â”€â–ºâ”‚   (ASP.NET)     â”‚   â”‚
        â”‚  â”‚  Port: 6379 â”‚      â”‚   Port: 5160    â”‚   â”‚
        â”‚  â”‚ âœ… Cluster â”‚       â”‚   âœ… Health    â”‚   â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚   SHARED STORAGE    â”‚
                â”‚   (Docker Volume)   â”‚
                â”‚ /app/shared_storage â”‚
                â”‚  ğŸ“ demo/          â”‚
                â”‚  ğŸ“ admin/         â”‚
                â”‚  ğŸ“ test/          â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ§© ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹

### Production Services:

| Ğ¡ĞµÑ€Ğ²Ğ¸Ñ | Ğ¢ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ñ | ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ | ĞŸĞ¾Ñ€Ñ‚Ñ‹ | Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ |
|--------|------------|------------|-------|--------|
| **haproxy-ftp** | HAProxy 2.8 | Load balancer + TCP proxy | 21, 8404, 50000-50010 | âœ… |
| **ftp-server-1,2,3** | .NET 8 C# | FTP protocol servers | 21, 50000-50010 | âœ… |
| **auth-service** | ASP.NET Core | Ğ¦ĞµĞ½Ñ‚Ñ€Ğ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ°Ñ Ğ°ÑƒÑ‚ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ | 5160 | âœ… |
| **redis** | Redis 7 | Session storage + caching | 6379 | âœ… |

### ĞšĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ Ğ¾ÑĞ¾Ğ±ĞµĞ½Ğ½Ğ¾ÑÑ‚Ğ¸ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ñ‹:
- ğŸ”„ **Sticky Sessions**: ĞšĞ»Ğ¸ĞµĞ½Ñ‚ Ğ²ÑĞµĞ³Ğ´Ğ° Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡Ğ°ĞµÑ‚ÑÑ Ğº Ñ‚Ğ¾Ğ¼Ñƒ Ğ¶Ğµ FTP ÑĞµÑ€Ğ²ĞµÑ€Ñƒ
- ğŸ¥ **Health Monitoring**: ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ Ğ¸ÑĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ Ğ½ĞµÑ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ÑÑ‰Ğ¸Ñ… ÑĞµÑ€Ğ²ĞµÑ€Ğ¾Ğ²
- ğŸ“Š **Real-time Stats**: Web-Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹Ñ Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³Ğ° Ğ½Ğ° Ğ¿Ğ¾Ñ€Ñ‚Ñƒ 8404
- ğŸŒ **Service Discovery**: ĞšĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ñ‹ Ğ¾Ğ±Ñ‰Ğ°ÑÑ‚ÑÑ Ğ¿Ğ¾ Ğ²Ğ½ÑƒÑ‚Ñ€ĞµĞ½Ğ½Ğ¸Ğ¼ Ğ¸Ğ¼ĞµĞ½Ğ°Ğ¼
- ğŸ”’ **Network Isolation**: Ğ˜Ğ·Ğ¾Ğ»Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ°Ñ Docker ÑĞµÑ‚ÑŒ ftp-network

## ğŸ“‚ Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°

```
DistributedFtpServer/
â”œâ”€â”€ ğŸ“ Distributed-FTP-Server/
â”‚   â”œâ”€â”€ ğŸ“ FtpServer.Core/              # ğŸ¯ Core FTP Server
â”‚   â”‚   â”œâ”€â”€ BasicFtpServer.cs           # ĞÑĞ½Ğ¾Ğ²Ğ½Ğ°Ñ FTP Ğ»Ğ¾Ğ³Ğ¸ĞºĞ°
â”‚   â”‚   â”œâ”€â”€ Program.cs                  # Entry point
â”‚   â”‚   â”œâ”€â”€ Services/                   # Auth, Session, Redis clients
â”‚   â”‚   â”œâ”€â”€ Dockerfile                  # Docker Ğ¾Ğ±Ñ€Ğ°Ğ·
â”‚   â”‚   â””â”€â”€ appsettings.json            # ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ
â”‚   â”œâ”€â”€ ğŸ“ FtpServer.Auth/              # ğŸ” Authentication API
â”‚   â”‚   â”œâ”€â”€ Controllers/AuthController.cs
â”‚   â”‚   â”œâ”€â”€ Models/                     # User, AuthResult models
â”‚   â”‚   â”œâ”€â”€ Dockerfile                  # Docker Ğ¾Ğ±Ñ€Ğ°Ğ·
â”‚   â”‚   â””â”€â”€ appsettings.json            # ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ
â”‚   â”œâ”€â”€ ğŸ“ FtpServer.Contracts/         # ğŸ“‹ Shared interfaces
â”‚   â””â”€â”€ ğŸ“ docker/                      # ğŸ³ Docker ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸
â”‚       â”œâ”€â”€ ğŸ“ haproxy/                 # HAProxy Load Balancer
â”‚       â”‚   â”œâ”€â”€ Dockerfile              # HAProxy Ğ¾Ğ±Ñ€Ğ°Ğ·
â”‚       â”‚   â””â”€â”€ haproxy.cfg             # â­ ĞÑĞ½Ğ¾Ğ²Ğ½Ğ°Ñ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ LB
â”‚       â””â”€â”€ ğŸ“ redis/                   # Redis Session Storage
â”‚           â””â”€â”€ Dockerfile              # Redis Ğ¾Ğ±Ñ€Ğ°Ğ·
â”œâ”€â”€ ğŸ“ ftp-nfs/                         # ğŸ’¾ Shared Storage
â”‚   â””â”€â”€ ğŸ“ storage/                     # Ğ¤Ğ°Ğ¹Ğ»Ñ‹ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹
â”‚       â”œâ”€â”€ ğŸ“ demo/                    # Ğ¢ĞµÑÑ‚Ğ¾Ğ²Ñ‹Ğ¹ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ
â”‚       â”œâ”€â”€ ğŸ“ admin/                   # ĞĞ´Ğ¼Ğ¸Ğ½Ğ¸ÑÑ‚Ñ€Ğ°Ñ‚Ğ¾Ñ€
â”‚       â””â”€â”€ ğŸ“ test/                    # Ğ¢ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ
â”œâ”€â”€ ğŸš€ deploy.sh                        # â­ ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ¾Ğµ Ñ€Ğ°Ğ·Ğ²ĞµÑ€Ñ‚Ñ‹Ğ²Ğ°Ğ½Ğ¸Ğµ
â”œâ”€â”€ ğŸ“– README.md                        # Ğ­Ñ‚Ğ° Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ
â””â”€â”€ ğŸ”§ docker-compose.yml               # ĞĞ»ÑŒÑ‚ĞµÑ€Ğ½Ğ°Ñ‚Ğ¸Ğ²Ğ½Ñ‹Ğ¹ ÑĞ¿Ğ¾ÑĞ¾Ğ± Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°
```

## ğŸš€ Ğ‘Ñ‹ÑÑ‚Ñ€Ğ¾Ğµ Ñ€Ğ°Ğ·Ğ²ĞµÑ€Ñ‚Ñ‹Ğ²Ğ°Ğ½Ğ¸Ğµ

### ĞŸÑ€ĞµĞ´Ğ²Ğ°Ñ€Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ñ‚Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ
- âœ… **Docker 20.10+** Ğ¸ **Docker Compose 2.0+**
- âœ… **Ğ¡Ğ²Ğ¾Ğ±Ğ¾Ğ´Ğ½Ñ‹Ğµ Ğ¿Ğ¾Ñ€Ñ‚Ñ‹**: 21, 5160, 6379, 8404, 50000-50010
- âœ… **ĞœĞ¸Ğ½Ğ¸Ğ¼ÑƒĞ¼ 4GB RAM** Ğ´Ğ»Ñ Ğ²ÑĞµÑ… ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ²
- âœ… **Linux OS** (Ğ¿Ñ€Ğ¾Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¾ Ğ½Ğ° Ubuntu 20.04+)

### ğŸ¯ ĞĞ´Ğ½Ğ° ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ° Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ»Ğ½Ğ¾Ğ³Ğ¾ Ñ€Ğ°Ğ·Ğ²ĞµÑ€Ñ‚Ñ‹Ğ²Ğ°Ğ½Ğ¸Ñ

```bash
# ĞšĞ»Ğ¾Ğ½Ğ¸Ñ€ÑƒĞµĞ¼ Ñ€ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ¹
git clone https://github.com/your-username/distributed-ftp-server.git
cd distributed-ftp-server

# Ğ”ĞµĞ»Ğ°ĞµĞ¼ ÑĞºÑ€Ğ¸Ğ¿Ñ‚ Ğ¸ÑĞ¿Ğ¾Ğ»Ğ½ÑĞµĞ¼Ñ‹Ğ¼
chmod +x deploy.sh

# ğŸš€ Ğ—ĞĞŸĞ£Ğ¡ĞšĞĞ•Ğœ ĞŸĞĞ›ĞĞĞ• Ğ ĞĞ—Ğ’Ğ•Ğ Ğ¢Ğ«Ğ’ĞĞĞ˜Ğ•
./deploy.sh
```

**Ğ§Ñ‚Ğ¾ Ğ¿Ñ€Ğ¾Ğ¸ÑÑ…Ğ¾Ğ´Ğ¸Ñ‚ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸:**
1. âœ… Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Docker ÑĞµÑ‚Ğ¸ `ftp-network`
2. âœ… Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ¸ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° shared storage  
3. âœ… Ğ¡Ğ±Ğ¾Ñ€ĞºĞ° Ğ²ÑĞµÑ… Docker Ğ¾Ğ±Ñ€Ğ°Ğ·Ğ¾Ğ² (Redis, Auth, FTP, HAProxy)
4. âœ… Ğ—Ğ°Ğ¿ÑƒÑĞº ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ² Ğ² Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ¾Ğ¹ Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸
5. âœ… ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ¾ÑĞ¿Ğ¾ÑĞ¾Ğ±Ğ½Ğ¾ÑÑ‚Ğ¸ Ğ²ÑĞµÑ… ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ¾Ğ²

### ğŸ§ª ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ñ€Ğ°Ğ·Ğ²ĞµÑ€Ñ‚Ñ‹Ğ²Ğ°Ğ½Ğ¸Ñ

```bash
# Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ Ğ²ÑĞµÑ… ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğ¾Ğ²
docker ps --format "table {{.Names}}\t{{.Status}}\t{{.Ports}}"

# Ğ‘Ñ‹ÑÑ‚Ñ€Ğ°Ñ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ
telnet localhost 21

# HAProxy Ğ²ĞµĞ±-Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹Ñ  
http://localhost:8404/stats
# Ğ›Ğ¾Ğ³Ğ¸Ğ½: admin, ĞŸĞ°Ñ€Ğ¾Ğ»ÑŒ: admin123

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ±Ğ°Ğ»Ğ°Ğ½ÑĞ¸Ñ€Ğ¾Ğ²ĞºĞ¸ (ĞºĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ¿Ğ¾Ğ¿Ğ°ÑÑ‚ÑŒ Ğ½Ğ° Ñ€Ğ°Ğ·Ğ½Ñ‹Ğ¹ ÑĞµÑ€Ğ²ĞµÑ€)
for i in {1..5}; do echo "USER demo" | nc localhost 21; done
```

## âš™ï¸ ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹

### ğŸ”§ ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸

| ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ | ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€ | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ | Ğ—Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾ ÑƒĞ¼Ğ¾Ğ»Ñ‡Ğ°Ğ½Ğ¸Ñ |
|-----------|----------|----------|----------------------|
| **HAProxy** | `bind *:21` | FTP Control port | 21 |
| **HAProxy** | `bind *:50000-50010` | FTP Data ports | 50000-50010 |
| **HAProxy** | `stick-table type ip` | Sticky sessions | ĞŸĞ¾ IP ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ° |
| **FTP Server** | `FtpExternalIP` | External IP for PASV | ĞĞ²Ñ‚Ğ¾Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸Ğµ |
| **FTP Server** | `FtpBehindProxy` | Proxy mode | true |
| **FTP Server** | `FtpPasvMinPort` | Min PASV port | 50000 |
| **FTP Server** | `FtpPasvMaxPort` | Max PASV port | 50010 |
| **Auth Service** | `RedisConnectionString` | Redis connection | redis:6379 |

### ğŸ“Š HAProxy ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ (haproxy.cfg)

```haproxy
# ğŸ¯ FTP Control Connections Ñ Sticky Sessions
listen ftp_control
    bind *:21
    stick-table type ip size 100k expire 30m
    stick on src  # ĞŸÑ€Ğ¸Ğ²ÑĞ·ĞºĞ° Ğ¿Ğ¾ IP ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ°
    server ftp-server-1 ftp-server-1:21 check inter 5s fall 3 rise 2
    server ftp-server-2 ftp-server-2:21 check inter 5s fall 3 rise 2
    server ftp-server-3 ftp-server-3:21 check inter 5s fall 3 rise 2

# ğŸ“¡ FTP Data Connections
listen ftp_data
    bind *:50000-50010  # Ğ”Ğ¸Ğ°Ğ¿Ğ°Ğ·Ğ¾Ğ½ Ğ¿Ğ¾Ñ€Ñ‚Ğ¾Ğ² Ğ´Ğ»Ñ PASV
    stick-table type ip size 100k expire 30m
    stick on src        # Ğ¢Ğ¾Ñ‚ Ğ¶Ğµ ĞºĞ»Ğ¸ĞµĞ½Ñ‚ â†’ Ñ‚Ğ¾Ñ‚ Ğ¶Ğµ ÑĞµÑ€Ğ²ĞµÑ€
    server ftp-server-1 ftp-server-1
    server ftp-server-2 ftp-server-2
    server ftp-server-3 ftp-server-3

# ğŸ“ˆ Monitoring Interface
listen stats_page
    bind *:8404
    mode http
    stats enable
    stats uri /stats
    stats auth admin:admin123
```

### ğŸ”§ Ğ Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ¸Ğµ Ğ´Ğ¸Ğ°Ğ¿Ğ°Ğ·Ğ¾Ğ½Ğ° Ğ¿Ğ¾Ñ€Ñ‚Ğ¾Ğ²

Ğ”Ğ»Ñ ÑƒĞ²ĞµĞ»Ğ¸Ñ‡ĞµĞ½Ğ¸Ñ ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ° Ğ¾Ğ´Ğ½Ğ¾Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ñ… ÑĞ¾ĞµĞ´Ğ¸Ğ½ĞµĞ½Ğ¸Ğ¹:

1. **ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚Ğµ haproxy.cfg:**
```haproxy
listen ftp_data
    bind *:50000-50050    # Ğ‘Ñ‹Ğ»Ğ¾ 50000-50010, ÑÑ‚Ğ°Ğ»Ğ¾ 50000-50050
```

2. **ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚Ğµ deploy.sh:**
```bash
-p 50000-50050:50000-50050    # Docker port mapping
-e FtpPasvMaxPort=50050       # Environment variable
```

3. **ĞŸĞµÑ€ĞµĞ·Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚Ğµ ĞºĞ»Ğ°ÑÑ‚ĞµÑ€:**
```bash
docker restart haproxy-ftp ftp-server-1 ftp-server-2 ftp-server-3
```
### Ğ’ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğµ ĞµÑÑ‚ÑŒ Ñ„Ğ°Ğ¹Ğ» ÑĞºÑ€Ğ¸Ğ¿Ñ‚Ğ° `create_container-ftp.sh`
Ğ Ğ°ÑĞ¿Ğ¾Ğ»Ğ¾Ğ¶ĞµĞ½ Ğ² ĞºĞ¾Ñ€Ğ½ĞµĞ²Ğ¾Ğ¹ Ğ¿Ğ°Ğ¿ĞºĞµ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°. Ğ”ĞµĞ»Ğ°ĞµĞ¼ ĞµĞ³Ğ¾ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ½Ñ‹ĞµĞ¼Ñ‹Ğ¼  Ğ—ĞĞŸĞ£Ğ¡ĞšĞĞ•Ğœ
```bash
chmod +x create_container.sh
./create_container.sh
```

## ğŸ§ª Ğ¢ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹

### Ğ¢ĞµÑÑ‚ 1: Ğ‘Ğ°Ğ·Ğ¾Ğ²Ğ¾Ğµ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ Ñ‡ĞµÑ€ĞµĞ· Load Balancer

```bash
# Telnet Ñ‚ĞµÑÑ‚
telnet localhost 21
# ĞĞ¶Ğ¸Ğ´Ğ°ĞµĞ¼Ñ‹Ğ¹ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚: 220 Welcome to Basic FTP Server v1.0

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° sticky session (Ñ‚Ğ¾Ñ‚ Ğ¶Ğµ ÑĞµÑ€Ğ²ĞµÑ€)
echo "USER demo" | nc localhost 21
echo "QUIT" | nc localhost 21
```

### Ğ¢ĞµÑÑ‚ 2: ĞŸĞ¾Ğ»Ğ½Ñ‹Ğ¹ FTP Workflow

```bash
# FTP ĞºĞ»Ğ¸ĞµĞ½Ñ‚
ftp localhost
# Username: demo
# Password: Ğ»ÑĞ±Ğ¾Ğ¹
# ĞšĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹:
# pwd     â†’ 257 "/" is current directory
# ls      â†’ Directory listing
# put filename
# get filename
# quit
```

### Ğ¢ĞµÑÑ‚ 3: FileZilla Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ â­

```
ğŸ“‹ ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ:
Host: localhost (Ğ¸Ğ»Ğ¸ Ğ²Ğ°Ñˆ Ğ²Ğ½ĞµÑˆĞ½Ğ¸Ğ¹ IP)
Port: 21
Protocol: FTP (Ğ¾Ğ±Ñ‹Ñ‡Ğ½Ñ‹Ğ¹)
Logon Type: Normal
User: demo, admin, Ğ¸Ğ»Ğ¸ test
Password: Ğ»ÑĞ±Ğ¾Ğ¹ Ğ¿Ğ°Ñ€Ğ¾Ğ»ÑŒ
```

**Ğ ĞµĞ¶Ğ¸Ğ¼ Ğ¿ĞµÑ€ĞµĞ´Ğ°Ñ‡Ğ¸:** ĞĞ±ÑĞ·Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ **Passive (PASV)**

### Ğ¢ĞµÑÑ‚ 4: Ğ‘Ğ°Ğ»Ğ°Ğ½ÑĞ¸Ñ€Ğ¾Ğ²ĞºĞ° Ğ½Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸ Ğ¸ Failover

```bash
# Ğ¢ĞµÑÑ‚ 4.1: ĞÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚Ğµ Ğ¾Ğ´Ğ¸Ğ½ ÑĞµÑ€Ğ²ĞµÑ€
docker stop ftp-server-1

# Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° Ğ´Ğ¾Ğ»Ğ¶Ğ½Ğ° Ğ¿Ñ€Ğ¾Ğ´Ğ¾Ğ»Ğ¶Ğ°Ñ‚ÑŒ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ñ‚ÑŒ
telnet localhost 21  # ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ Ñ‡ĞµÑ€ĞµĞ· ftp-server-2 Ğ¸Ğ»Ğ¸ ftp-server-3

# Ğ¢ĞµÑÑ‚ 4.2: Ğ’ĞµÑ€Ğ½Ğ¸Ñ‚Ğµ ÑĞµÑ€Ğ²ĞµÑ€
docker start ftp-server-1

# HAProxy Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ğ²ĞºĞ»ÑÑ‡Ğ¸Ñ‚ ĞµĞ³Ğ¾ Ğ¾Ğ±Ñ€Ğ°Ñ‚Ğ½Ğ¾ Ğ² Ğ±Ğ°Ğ»Ğ°Ğ½ÑĞ¸Ñ€Ğ¾Ğ²ĞºÑƒ
```

### Ğ¢ĞµÑÑ‚ 5: Shared Storage Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ°

```bash
# 1. ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡Ğ¸Ñ‚ĞµÑÑŒ Ñ‡ĞµÑ€ĞµĞ· FileZilla Ğ¸ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·Ğ¸Ñ‚Ğµ Ñ„Ğ°Ğ¹Ğ» test.txt
# 2. ĞÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚Ğµ Ñ‚ĞµĞºÑƒÑ‰Ğ¸Ğ¹ FTP ÑĞµÑ€Ğ²ĞµÑ€: docker stop ftp-server-1
# 3. ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡Ğ¸Ñ‚ĞµÑÑŒ Ğ·Ğ°Ğ½Ğ¾Ğ²Ğ¾ (Ğ¿Ğ¾Ğ¿Ğ°Ğ´ĞµÑ‚Ğµ Ğ½Ğ° Ğ´Ñ€ÑƒĞ³Ğ¾Ğ¹ ÑĞµÑ€Ğ²ĞµÑ€)
# 4. Ğ¤Ğ°Ğ¹Ğ» test.txt Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½ Ğ±Ñ‹Ñ‚ÑŒ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ĞµĞ½ â†’ shared storage Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚! âœ…
```

## ğŸ“Š ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³ Ğ¸ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ

### ğŸŒ HAProxy Web Interface

**URL:** `http://localhost:8404/stats`  
**Ğ›Ğ¾Ğ³Ğ¸Ğ½:** `admin`  
**ĞŸĞ°Ñ€Ğ¾Ğ»ÑŒ:** `admin123`

**Ğ§Ñ‚Ğ¾ Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ´ĞµĞ»Ğ°Ñ‚ÑŒ:**
- ğŸ“Š ĞŸÑ€Ğ¾ÑĞ¼Ğ°Ñ‚Ñ€Ğ¸Ğ²Ğ°Ñ‚ÑŒ ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºÑƒ Ğ² Ñ€ĞµĞ°Ğ»ÑŒĞ½Ğ¾Ğ¼ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸
- ğŸ”„ Ğ’ĞºĞ»ÑÑ‡Ğ°Ñ‚ÑŒ/Ğ¾Ñ‚ĞºĞ»ÑÑ‡Ğ°Ñ‚ÑŒ ÑĞµÑ€Ğ²ĞµÑ€Ñ‹
- âš–ï¸ Ğ˜Ğ·Ğ¼ĞµĞ½ÑÑ‚ÑŒ Ğ²ĞµÑĞ° ÑĞµÑ€Ğ²ĞµÑ€Ğ¾Ğ²  
- ğŸ“ˆ ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ñ‚ÑŒ ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ ÑĞ¾ĞµĞ´Ğ¸Ğ½ĞµĞ½Ğ¸Ğ¹
- ğŸ¥ ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑÑ‚ÑŒ health status ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ ÑĞµÑ€Ğ²ĞµÑ€Ğ°

### ğŸ”§ Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ñ‡ĞµÑ€ĞµĞ· ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ½ÑƒÑ ÑÑ‚Ñ€Ğ¾ĞºÑƒ

```bash
# ĞŸĞ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºÑƒ ÑĞµÑ€Ğ²ĞµÑ€Ğ¾Ğ²
echo 'show stat' | docker exec -i haproxy-ftp socat stdio /var/run/haproxy.sock

# ĞÑ‚ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ ÑĞµÑ€Ğ²ĞµÑ€ (graceful)
echo 'disable server ftp_control/ftp-server-2' | docker exec -i haproxy-ftp socat stdio /var/run/haproxy.sock

# Ğ’ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ ÑĞµÑ€Ğ²ĞµÑ€ Ğ¾Ğ±Ñ€Ğ°Ñ‚Ğ½Ğ¾
echo 'enable server ftp_control/ftp-server-2' | docker exec -i haproxy-ftp socat stdio /var/run/haproxy.sock

# Ğ˜Ğ·Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ğ²ĞµÑ ÑĞµÑ€Ğ²ĞµÑ€Ğ° (Ğ±Ğ¾Ğ»ÑŒÑˆĞµ Ğ²ĞµÑ = Ğ±Ğ¾Ğ»ÑŒÑˆĞµ ÑĞ¾ĞµĞ´Ğ¸Ğ½ĞµĞ½Ğ¸Ğ¹)
echo 'set weight ftp_control/ftp-server-1 150' | docker exec -i haproxy-ftp socat stdio /var/run/haproxy.sock
```

### ğŸ“‹ ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³ Ñ€ĞµÑÑƒÑ€ÑĞ¾Ğ²

```bash
# Ğ¡Ñ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ° Ğ²ÑĞµÑ… ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğ¾Ğ²
docker stats haproxy-ftp ftp-server-1 ftp-server-2 ftp-server-3 auth-service redis

# ĞĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ğµ FTP ÑĞ¾ĞµĞ´Ğ¸Ğ½ĞµĞ½Ğ¸Ñ
netstat -an | grep -E ":(21|500[0-9][0-9])" | grep ESTABLISHED

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ·Ğ´Ğ¾Ñ€Ğ¾Ğ²ÑŒÑ Redis
docker exec redis redis-cli ping

# Ğ›Ğ¾Ğ³Ğ¸ Ğ² Ñ€ĞµĞ°Ğ»ÑŒĞ½Ğ¾Ğ¼ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸
docker logs -f haproxy-ftp
```

### ğŸ“ˆ Ğ¡Ñ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ° HAProxy FTP Load Balancer
![HAProxy FTP Load Balancer](/docs/img/haproxy.png)

### ğŸ“ˆ ĞšĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸ Ğ´Ğ»Ñ Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³Ğ°

| ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ° | ĞšĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ° Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ¸ | ĞĞ¾Ñ€Ğ¼Ğ° |
|---------|------------------|-------|
| **Active Sessions** | HAProxy Stats â†’ Current Sessions | < 80% Ğ¾Ñ‚ max |
| **Server Health** | HAProxy Stats â†’ Status | All UP |
| **Response Time** | Telnet test time | < 100ms |
| **Memory Usage** | `docker stats` | < 80% |
| **Disk Space** | `df -h ./ftp-nfs/` | < 90% |

## ğŸ”§ ĞœĞ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ

### ğŸ“ˆ Ğ“Ğ¾Ñ€Ğ¸Ğ·Ğ¾Ğ½Ñ‚Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ Ğ¼Ğ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ (Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ÑĞµÑ€Ğ²ĞµÑ€Ğ¾Ğ²)

```bash
# Ğ¨Ğ°Ğ³ 1: Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ Ğ½Ğ¾Ğ²Ñ‹Ğ¹ FTP ÑĞµÑ€Ğ²ĞµÑ€
docker run -d \
  --name ftp-server-4 \
  --network ftp-network \
  -e FtpExternalIP=$(hostname -I | awk '{print $1}') \
  -e FtpBehindProxy=true \
  -e port=21 \
  -e FtpPasvMinPort=50000 \
  -e FtpPasvMaxPort=50010 \
  -e RedisConnectionString=redis:6379 \
  -e authservice=http://auth-service:5160 \
  -v "$PWD/ftp-nfs/storage":/app/shared_storage \
  ftp-server:ftp

# Ğ¨Ğ°Ğ³ 2: ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ HAProxy ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ
# Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ² haproxy.cfg:
# server ftp-server-4 ftp-server-4:21 check inter 5s fall 3 rise 2

# Ğ¨Ğ°Ğ³ 3: ĞŸĞµÑ€ĞµĞ·Ğ°Ğ³Ñ€ÑƒĞ·Ğ¸Ñ‚ÑŒ HAProxy (Ğ±ĞµĞ· Ğ¿Ğ¾Ñ‚ĞµÑ€Ğ¸ ÑĞ¾ĞµĞ´Ğ¸Ğ½ĞµĞ½Ğ¸Ğ¹)
docker exec haproxy-ftp haproxy -f /usr/local/etc/haproxy/haproxy.cfg -sf 1
```

### â¬†ï¸ Ğ’ĞµÑ€Ñ‚Ğ¸ĞºĞ°Ğ»ÑŒĞ½Ğ¾Ğµ Ğ¼Ğ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ (Ñ€ĞµÑÑƒÑ€ÑÑ‹)

```bash
# Ğ£Ğ²ĞµĞ»Ğ¸Ñ‡Ğ¸Ñ‚ÑŒ CPU Ğ¸ Ğ¿Ğ°Ğ¼ÑÑ‚ÑŒ Ğ´Ğ»Ñ FTP ÑĞµÑ€Ğ²ĞµÑ€Ğ¾Ğ²
docker update --cpus="2.0" --memory="2g" ftp-server-1
docker update --cpus="2.0" --memory="2g" ftp-server-2
docker update --cpus="2.0" --memory="2g" ftp-server-3

# Ğ£Ğ²ĞµĞ»Ğ¸Ñ‡Ğ¸Ñ‚ÑŒ Ñ€ĞµÑÑƒÑ€ÑÑ‹ Ğ´Ğ»Ñ Redis
docker update --cpus="1.0" --memory="1g" redis

# Ğ£Ğ²ĞµĞ»Ğ¸Ñ‡Ğ¸Ñ‚ÑŒ Ñ€ĞµÑÑƒÑ€ÑÑ‹ Ğ´Ğ»Ñ HAProxy
docker update --cpus="1.0" --memory="512m" haproxy-ftp
```

## ğŸ› Ğ£ÑÑ‚Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ½ĞµĞ¿Ğ¾Ğ»Ğ°Ğ´Ğ¾Ğº

### âŒ ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ° 1: "Connection timeout" Ğ¿Ñ€Ğ¸ LIST ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ğµ

**Ğ¡Ğ¸Ğ¼Ğ¿Ñ‚Ğ¾Ğ¼Ñ‹:** 
- ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ Ğº FTP ÑƒÑĞ¿ĞµÑˆĞ½Ğ¾
- ĞÑƒÑ‚ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ Ğ¿Ñ€Ğ¾Ñ…Ğ¾Ğ´Ğ¸Ñ‚
- ĞšĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ° LIST Ğ·Ğ°Ğ²Ğ¸ÑĞ°ĞµÑ‚ Ğ½Ğ° 20 ÑĞµĞºÑƒĞ½Ğ´

**ĞŸÑ€Ğ¸Ñ‡Ğ¸Ğ½Ğ°:** Data connection Ğ¿Ğ¾Ñ€Ñ‚Ñ‹ Ğ½ĞµĞ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ñ‹

**Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ:**
```bash
# ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ñ€Ñ‚Ñ‹ HAProxy
docker exec haproxy-ftp netstat -tlnp | grep -E "(50000|50005|50010)"

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ firewall
sudo ufw status | grep 50000
sudo ufw allow 50000:50010/tcp

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ğ²Ğ½ĞµÑˆĞ½Ğ¸Ğ¹ IP
curl ifconfig.me
hostname -I | awk '{print $1}'
```

### âŒ ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ° 2: HAProxy Ğ¿Ğ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ ÑĞµÑ€Ğ²ĞµÑ€Ñ‹ ĞºĞ°Ğº DOWN

**Ğ¡Ğ¸Ğ¼Ğ¿Ñ‚Ğ¾Ğ¼Ñ‹:** 
- Ğ’ Ğ²ĞµĞ±-Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹ÑĞµ HAProxy ÑĞµÑ€Ğ²ĞµÑ€Ñ‹ ĞºÑ€Ğ°ÑĞ½Ñ‹Ğµ
- Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ: "DOWN"

**ĞŸÑ€Ğ¸Ñ‡Ğ¸Ğ½Ğ°:** Health checks Ğ½Ğµ Ğ¿Ñ€Ğ¾Ñ…Ğ¾Ğ´ÑÑ‚

**Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ:**
```bash
# ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ğ»Ğ¾Ğ³Ğ¸ HAProxy
docker logs haproxy-ftp | grep -i health

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ FTP ÑĞµÑ€Ğ²ĞµÑ€Ñ‹
docker logs ftp-server-1 | tail -20

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ ÑĞµÑ‚ĞµĞ²Ğ¾Ğµ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ
docker exec haproxy-ftp ping ftp-server-1

# ĞŸĞµÑ€ĞµĞ·Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ½Ñ‹Ğ¹ ÑĞµÑ€Ğ²ĞµÑ€
docker restart ftp-server-1
```

### âŒ ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ° 3: ĞĞµÑ‚ sticky sessions (ĞºĞ»Ğ¸ĞµĞ½Ñ‚ Ğ¿Ğ¾Ğ¿Ğ°Ğ´Ğ°ĞµÑ‚ Ğ½Ğ° Ñ€Ğ°Ğ·Ğ½Ñ‹Ğµ ÑĞµÑ€Ğ²ĞµÑ€Ñ‹)

**Ğ¡Ğ¸Ğ¼Ğ¿Ñ‚Ğ¾Ğ¼Ñ‹:** 
- ĞšĞ°Ğ¶Ğ´Ğ¾Ğµ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾Ğ¿Ğ°Ğ´Ğ°ĞµÑ‚ Ğ½Ğ° Ñ€Ğ°Ğ·Ğ½Ñ‹Ğ¹ ÑĞµÑ€Ğ²ĞµÑ€
- ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ñ‹ Ñ Ğ¿ĞµÑ€ĞµĞ´Ğ°Ñ‡ĞµĞ¹ Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²

**ĞŸÑ€Ğ¸Ñ‡Ğ¸Ğ½Ğ°:** ĞĞµĞ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ°Ñ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ HAProxy

**Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ:**
```bash
# ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ sticky sessions
docker exec haproxy-ftp cat /usr/local/etc/haproxy/haproxy.cfg | grep -A5 "stick"

# Ğ”Ğ¾Ğ»Ğ¶Ğ½Ğ¾ Ğ±Ñ‹Ñ‚ÑŒ:
# stick-table type ip size 100k expire 30m
# stick on src

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñƒ sticky sessions
echo 'show table ftp_control' | docker exec -i haproxy-ftp socat stdio /var/run/haproxy.sock
```

### âŒ ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ° 4: Redis connection errors

**Ğ¡Ğ¸Ğ¼Ğ¿Ñ‚Ğ¾Ğ¼Ñ‹:** 
- Ğ¡ĞµÑÑĞ¸Ğ¸ Ğ½Ğµ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ÑÑÑ‚ÑÑ
- ĞŸĞ¾Ğ²Ñ‚Ğ¾Ñ€Ğ½Ğ°Ñ Ğ°ÑƒÑ‚ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ Ñ‚Ñ€ĞµĞ±ÑƒĞµÑ‚ÑÑ

**Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ:**
```bash
# ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Redis
docker logs redis
docker exec redis redis-cli ping

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ Ğ¾Ñ‚ FTP ÑĞµÑ€Ğ²ĞµÑ€Ğ¾Ğ²
docker exec ftp-server-1 ping redis
docker exec ftp-server-1 telnet redis 6379

# ĞŸĞµÑ€ĞµĞ·Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ Redis
docker restart redis
```

## ğŸ”’ Ğ‘ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚ÑŒ Ğ¸ Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´ÑÑ‚Ğ²ĞµĞ½Ğ½Ñ‹Ğµ Ñ€ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ğ¸Ğ¸

### ğŸ›¡ï¸ Ğ‘Ğ°Ğ·Ğ¾Ğ²Ğ°Ñ Ğ±ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚ÑŒ

```bash
# 1. Ğ˜Ğ·Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ğ¿Ğ°Ñ€Ğ¾Ğ»Ğ¸ Ğ¿Ğ¾ ÑƒĞ¼Ğ¾Ğ»Ñ‡Ğ°Ğ½Ğ¸Ñ
# Ğ’ haproxy.cfg:
stats auth admin:YOUR_STRONG_PASSWORD

# 2. ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¸Ñ‚ÑŒ firewall
sudo ufw enable
sudo ufw allow 21/tcp
sudo ufw allow 50000:50010/tcp
sudo ufw allow 8404/tcp from YOUR_ADMIN_IP

# 3. Ğ—Ğ°Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¿Ñ€ÑĞ¼Ğ¾Ğ¹ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ Ğº Ğ²Ğ½ÑƒÑ‚Ñ€ĞµĞ½Ğ½Ğ¸Ğ¼ ÑĞµÑ€Ğ²Ğ¸ÑĞ°Ğ¼
sudo ufw deny 6379    # Redis
sudo ufw deny 5160    # Auth Service
```

### ğŸ“‹ Production Checklist

- [ ] **ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³**: ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¸Ñ‚ÑŒ Prometheus + Grafana
- [ ] **Backup**: ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ Ñ€ĞµĞ·ĞµÑ€Ğ²Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Redis Ğ¸ Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²
- [ ] **Ğ›Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ**: Ğ¦ĞµĞ½Ñ‚Ñ€Ğ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ»Ğ¾Ğ³Ğ¸ (ELK Stack)
- [ ] **SSL/TLS**: FTPS Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ° Ğ´Ğ»Ñ ÑˆĞ¸Ñ„Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ
- [ ] **ĞÑƒÑ‚ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ**: Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ñ LDAP/Active Directory
- [ ] **ĞšĞ²Ğ¾Ñ‚Ñ‹**: ĞĞ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ĞµĞ½Ğ¸Ñ Ğ½Ğ° Ğ´Ğ¸ÑĞºĞ¾Ğ²Ğ¾Ğµ Ğ¿Ñ€Ğ¾ÑÑ‚Ñ€Ğ°Ğ½ÑÑ‚Ğ²Ğ¾
- [ ] **Alerting**: Ğ£Ğ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ Ğ¾ Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°Ñ…

## ğŸ—ºï¸ Roadmap Ñ€Ğ°Ğ·Ğ²Ğ¸Ñ‚Ğ¸Ñ

### âœ… Ğ¤Ğ°Ğ·Ğ° 1: MVP Single Server (Ğ—Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ¾)
- ĞÑĞ½Ğ¾Ğ²Ğ½Ğ°Ñ FTP Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ (.NET 8)
- Docker ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ
- Ğ‘Ğ°Ğ·Ğ¾Ğ²Ğ°Ñ Ğ°ÑƒÑ‚ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ

### âœ… Ğ¤Ğ°Ğ·Ğ° 2: Distributed Architecture (Ğ¢ĞµĞºÑƒÑ‰Ğ°Ñ - Ğ—ĞĞ’Ğ•Ğ Ğ¨Ğ•ĞĞ) 
- **HAProxy load balancer** Ñ sticky sessions â­
- **Redis session management** Ğ´Ğ»Ñ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ
- **ĞœĞ½Ğ¾Ğ¶ĞµÑÑ‚Ğ²ĞµĞ½Ğ½Ñ‹Ğµ FTP ÑĞµÑ€Ğ²ĞµÑ€Ñ‹** (3 ÑĞºĞ·ĞµĞ¼Ğ¿Ğ»ÑÑ€Ğ°)
- **Shared storage** Ğ¼ĞµĞ¶Ğ´Ñƒ ÑĞµÑ€Ğ²ĞµÑ€Ğ°Ğ¼Ğ¸
- **Health monitoring** Ğ¸ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ failover
- **Web-Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹Ñ Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³Ğ°**
- **ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ¾Ğµ Ñ€Ğ°Ğ·Ğ²ĞµÑ€Ñ‚Ñ‹Ğ²Ğ°Ğ½Ğ¸Ğµ**

### ğŸš€ Ğ¤Ğ°Ğ·Ğ° 3: Enterprise Security & Monitoring (Ğ¡Ğ»ĞµĞ´ÑƒÑÑ‰Ğ°Ñ)
- [ ] **FTPS Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ°** (FTP over TLS/SSL)
- [ ] **Prometheus metrics** export
- [ ] **Grafana dashboards** Ğ´Ğ»Ñ Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³Ğ°
- [ ] **LDAP/Active Directory** Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ
- [ ] **User quotas** Ğ¸ disk management
- [ ] **Advanced logging** Ñ ELK Stack

### ğŸŒŸ Ğ¤Ğ°Ğ·Ğ° 4: Cloud Native & Auto-scaling
- [ ] **Kubernetes deployment** manifests
- [ ] **Auto-scaling** Ğ½Ğ° Ğ¾ÑĞ½Ğ¾Ğ²Ğµ Ğ¼ĞµÑ‚Ñ€Ğ¸Ğº Ğ½Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸
- [ ] **Distributed file system** (Ceph/GlusterFS)
- [ ] **Multi-region** deployment
- [ ] **API Gateway** Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ
- [ ] **OAuth 2.0** authentication

## ğŸ¤ Ğ£Ñ‡Ğ°ÑÑ‚Ğ¸Ğµ Ğ² Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞµ

### ğŸš€ Ğ‘Ñ‹ÑÑ‚Ñ€Ñ‹Ğ¹ ÑÑ‚Ğ°Ñ€Ñ‚ Ğ´Ğ»Ñ Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸

```bash
# 1. Fork Ñ€ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ¹
git clone https://github.com/your-username/distributed-ftp-server.git
cd distributed-ftp-server

# 2. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ²ĞµÑ‚ĞºÑƒ Ğ´Ğ»Ñ Ñ„Ğ¸Ñ‡Ğ¸
git checkout -b feature/your-awesome-feature

# 3. Ğ›Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ°Ñ Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ°
./deploy.sh  # Ğ Ğ°Ğ·Ğ²ĞµÑ€Ğ½ÑƒÑ‚ÑŒ Ñ‚ĞµÑÑ‚Ğ¾Ğ²Ğ¾Ğµ Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ğµ

# 4. Ğ¢ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğ¹
docker logs -f ftp-server-1  # ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ğ»Ğ¾Ğ³Ğ¸
telnet localhost 21          # Ğ¢ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ

# 5. Commit Ğ¸ Push
git add .
git commit -m "feat: add awesome feature"
git push origin feature/your-awesome-feature
```

### ğŸ“‹ Ğ¡Ñ‚Ğ°Ğ½Ğ´Ğ°Ñ€Ñ‚Ñ‹ Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸

- **C# ĞºĞ¾Ğ´**: Ğ¡Ğ»ĞµĞ´Ğ¾Ğ²Ğ°Ñ‚ÑŒ [Microsoft C# conventions](https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/inside-a-program/coding-conventions)
- **Docker**: Multi-stage builds, Ğ¼Ğ¸Ğ½Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¾Ğ±Ñ€Ğ°Ğ·Ñ‹
- **Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ**: ĞĞ±Ğ½Ğ¾Ğ²Ğ»ÑÑ‚ÑŒ README.md Ğ´Ğ»Ñ Ğ½Ğ¾Ğ²Ñ‹Ñ… Ñ„Ğ¸Ñ‡
- **Ğ¢ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ**: ĞŸĞ¾Ğ»Ğ½Ğ¾Ğµ Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ² distributed Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ğ¸

## ğŸ“ ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ° Ğ¸ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµÑÑ‚Ğ²Ğ¾

- ğŸ› **Issues**: [GitHub Issues](https://github.com/your-username/distributed-ftp-server/issues)
- ğŸ’¬ **Discussions**: [GitHub Discussions](https://github.com/your-username/distributed-ftp-server/discussions)
- ğŸ“š **Wiki**: [Project Wiki](https://github.com/your-username/distributed-ftp-server/wiki)

## ğŸ“„ Ğ›Ğ¸Ñ†ĞµĞ½Ğ·Ğ¸Ñ

MIT License - Ğ¿Ğ¾Ğ´Ñ€Ğ¾Ğ±Ğ½Ğ¾ÑÑ‚Ğ¸ Ğ² Ñ„Ğ°Ğ¹Ğ»Ğµ [LICENSE](LICENSE).

---

## ğŸ‰ Ğ‘Ğ»Ğ°Ğ³Ğ¾Ğ´Ğ°Ñ€Ğ½Ğ¾ÑÑ‚Ğ¸

- **HAProxy Team** - Ğ·Ğ° Ğ¾Ñ‚Ğ»Ğ¸Ñ‡Ğ½Ñ‹Ğ¹ load balancer Ğ´Ğ»Ñ TCP Ğ¿Ñ€Ğ¾Ñ‚Ğ¾ĞºĞ¾Ğ»Ğ¾Ğ²
- **Microsoft .NET Team** - Ğ·Ğ° Ğ¼Ğ¾Ñ‰Ğ½ÑƒÑ Ğ¿Ğ»Ğ°Ñ‚Ñ„Ğ¾Ñ€Ğ¼Ñƒ .NET 8
- **Redis Team** - Ğ·Ğ° Ğ²Ñ‹ÑĞ¾ĞºĞ¾Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾Ğµ Ñ…Ñ€Ğ°Ğ½Ğ¸Ğ»Ğ¸Ñ‰Ğµ ÑĞµÑÑĞ¸Ğ¹
- **Docker Team** - Ğ·Ğ° Ğ¿Ğ»Ğ°Ñ‚Ñ„Ğ¾Ñ€Ğ¼Ñƒ ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸
- **Community Contributors** - Ğ·Ğ° feedback Ğ¸ ÑƒĞ»ÑƒÑ‡ÑˆĞµĞ½Ğ¸Ñ

---

<div align="center">

**ğŸš€ Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°:** Production Ready âœ…  
**ğŸ—ï¸ ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°:** Fully Distributed Ñ HAProxy  
**ğŸ“ˆ ĞœĞ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ:** Horizontal + Vertical Ready  
**ğŸ”’ Ğ‘ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚ÑŒ:** Enterprise Grade  
**ğŸ“Š ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³:** Real-time HAProxy Stats  

**Ğ¡Ğ´ĞµĞ»Ğ°Ğ½Ğ¾ Ñ â¤ï¸ Ğ´Ğ»Ñ enterprise Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ¾Ğ±Ğ¼ĞµĞ½Ğ½Ñ‹Ñ… Ñ€ĞµÑˆĞµĞ½Ğ¸Ğ¹**

</div>